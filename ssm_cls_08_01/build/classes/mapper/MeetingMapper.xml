<?xml version="1.0" encoding="UTF-8" ?>
 <!DOCTYPE mapper
   PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
     "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bawei.dao.MeetingDao">

	<!-- 查询会议信息 -->
	<select id="findMeeting" parameterType="Meeting" resultType="Meeting">
		select 
		id,meetingName,startTime,endTime,cityId,state 
		from meeting
		<where>
			<if test="id!=null and id>0">
				and id = #{id}
			</if>
			<if test="meetingName!=null and meetingName!=''">
				and meetingName like concat('%',#{meetingName},'%')
			</if>
			<if test="state!=null and state>=0">
				and state=#{state}
			</if>
			<if test="startTime!=null and startTime!=''">
				and startTime>=#{startTime}
			</if>
			<if test="endTime!=null and endTime!=''">
				and endTime&lt;=#{endTime}
			</if>
		</where>
	</select>
	
	<!-- 新增会议信息 -->
	<insert id="add" parameterType="Meeting">
		INSERT INTO meeting(meetingName,startTime,endTime,provinceId,cityId,countyId,address,contact,telephone,mobilephone,introduce,image,state) 
		VALUES(#{meetingName},#{startTime},#{endTime},#{provinceId},#{cityId},#{countyId},#{address},#{contact},#{telephone},#{mobilephone},#{introduce},#{image},#{state})
	</insert>
	
	<!-- 删除会议信息 -->
	<delete id="deleteMeetingById">
		delete from meeting where id in 
		<foreach collection="array" open="(" close=")" separator="," item="id">
			#{id}
		</foreach>
	</delete>
	
	<!-- 根据id查询单个会议信息 -->
	<select id="findMeetingById" resultType="Meeting">
		select * from meeting where id=#{id}
	</select>
	
	<!-- 修改会议信息 -->
	<update id="updateMeetingById" parameterType="Meeting">
		update meeting
		<set>
			<if test="meetingName!=null">meetingName=#{meetingName},</if>
			<if test="startTime!=null">startTime=#{startTime},</if>
			<if test="endTime!=null">endTime=#{endTime},</if>
			<if test="provinceId!=null">provinceId=#{provinceId},</if>
			<if test="cityId!=null">cityId=#{cityId},</if>
			<if test="countyId!=null">countyId=#{countyId},</if>
			<if test="address!=null">address=#{address},</if>
			<if test="contact!=null">contact=#{contact},</if>
			<if test="telephone!=null">telephone=#{telephone},</if>
			<if test="mobilephone!=null">mobilephone=#{mobilephone},</if>
			<if test="introduce!=null">introduce=#{introduce},</if>
			<if test="image!=null">image=#{image},</if>
			<if test="state!=null">state=#{state},</if>
		</set>
		where id=#{id}
	</update>
</mapper>









